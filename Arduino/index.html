<!doctype html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Test</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body>
	<header>


		<div class="pubnub"></div>
	</header>


	<section class="preference">

		<div>
			<div class="caption red">Red</div>
			<label for="red" class="brightness fa">
				<input id="red" type="range" min="1" max="255" step="1" value="0">
			</label>
		</div>

		<div>
			<div class="caption green">Green</div>
			<label for="green" class="brightness fa">
				<input id="green" type="range" min="1" max="255" step="1" value="0">
			</label>
		</div>
		
		<div>
			<div class="caption blue">Blue</div>
			<label for="blue" class="brightness fa">
				<input id="blue" type="range" min="1" max="255" step="1" value="0">
			</label>
		</div>

	</section>
	<section class="preference2">

		<div>
			<div class="caption red2">Red</div>
			<label for="red" class="brightness fa">
				<input id="red2" type="range" min="1" max="255" step="1" value="0">
			</label>
		</div>

		<div>
			<div class="caption green2">Green</div>
			<label for="green" class="brightness fa">
				<input id="green2" type="range" min="1" max="255" step="1" value="0">
			</label>
		</div>

		<div>
			<div class="caption blue2">Blue</div>
			<label for="blue" class="brightness fa">
				<input id="blue2" type="range" min="1" max="255" step="1" value="0">
			</label>
		</div>

	</section>

	<script src="http://cdn.pubnub.com/pubnub-3.7.15.min.js"></script>
	<script>
(function(){

	var settings = {
		channel: 'Channel-u7cd341a3',
		publish_key: 'pub-c-6ec1bade-3025-42e6-b4f7-a953fee47d4c',
		subscribe_key: 'sub-c-74c85f44-f100-11e5-8112-02ee2ddab7fe'
	};

	var pubnub = PUBNUB(settings);

	var red = document.getElementById('red');
	var green = document.getElementById('green');
	var blue = document.getElementById('blue');

	function publishUpdate(data) {
		pubnub.publish({
			channel: settings.channel, 
			message: data
		});
	}

	// UI EVENTS

	red.addEventListener('change', function(e){
		publishUpdate({color: 'red', brightness: +this.value});
	}, false);

	green.addEventListener('change', function(e){
		publishUpdate({color: 'green', brightness: +this.value});
	}, false);

	blue.addEventListener('change', function(e){
		publishUpdate({color: 'blue', brightness: +this.value});
	}, false);

})();
	</script>
	
</body>
</html>